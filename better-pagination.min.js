(function(){var a,k,h;a=jQuery;h="better_pagination";k={starts_at:15,load_on_scroll:false,loading_selector:"#loading-posts",show_more_selector:"#show-more",no_more_selector:"#no-more-posts",load_path:"posts/load",debug:false};a.fn.extend({better_pagination:function(p){var f,l,d,i,g,m,j,e,n,b,o;b=a.extend({},k,p);m=this;f=a(b.loading_selector);d=a(b.show_more_selector);l=a(b.no_more_selector);i=function(){if(a(window).scrollTop()===a(document).height()-a(window).height()){j();return f.show()}};g=function(){console.log(a(document).height());console.log(a(window).height());console.log(b.load_on_scroll);if(a(document).height()>a(window).height()&&b.load_on_scroll===true){d.remove();return false}else{return true}};j=function(){if(b.load_on_scroll){a(window).off("scroll")}return a.get("/"+b.load_path+"?starts_at="+b.starts_at,function(c){f.hide();g();if(c.has_more){m.append(c.html);b.starts_at=c.new_start;if(b.load_on_scroll){return a(window).on("scroll",i)}}else{b.starts_at=0;d.remove();return l.show()}}).error(function(c){e("Got an error loading more elements.");return f.hide()})};e=function(c){if(b.debug){return typeof console!=="undefined"&&console!==null?console.log(c):void 0}};n=function(){d.hide();return a(window).on("scroll",i)};o=function(){e("Binding the show more link");return d.on("click.better_pagination",function(c){c.preventDefault();e("Clicked the show more link");j();return g()})};return this.each(function(){if(!a.data(this,"plugin_"+h)||b.debug){e("Initializing better_pagination "+(b.load_on_scroll?"with":"without")+" scroll.");if(g()){o()}else{n()}return a.data(this,"plugin_"+h,b)}})}})}).call(this);